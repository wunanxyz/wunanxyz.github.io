<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>吴楠的小栈</title>
  
  <subtitle>study hard , study smart</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.wunan520.cn/"/>
  <updated>2018-10-17T06:12:19.095Z</updated>
  <id>http://www.wunan520.cn/</id>
  
  <author>
    <name>EmilyWu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS推送系列之Push的工作原理</title>
    <link href="http://www.wunan520.cn/2018/10/17/PrincipleOfPush/"/>
    <id>http://www.wunan520.cn/2018/10/17/PrincipleOfPush/</id>
    <published>2018-10-17T03:40:53.000Z</published>
    <updated>2018-10-17T06:12:19.095Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Push的工作原理"><a href="#Push的工作原理" class="headerlink" title="Push的工作原理"></a>Push的工作原理</h3><p>  要理解Push的工作原理，我们必须要知道几个知识点。</p><ul><li>设备是如何和APNs保持连接的。</li><li>APNs如何识别需要推送的设备。</li></ul><p>&emsp;&emsp;APNs可以推送给设备Push消息，是因为设备(iPhone、iPad)和APNs有一个长连接的通道。<br>&emsp;&emsp;iOS的Push通道是一个独立的长连接通道，并且是唯一的一个通道，由iOS系统独立维护。也就是说每一个手机系统，每次开机后，手机后台就会发出一个长连接，连接到苹果服务器(APNs)。<br>当APNs收到新的Push通知的时候就会把通知推送给应用设备。</p><p><img src="https://upload-images.jianshu.io/upload_images/1683361-b84ca1f2f30f0748.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="苹果官方网站的原理图"></p><p>通过官方的原理图四个身份</p><ul><li>Provider：我们的服务器sever</li><li>APNs：苹果服务器</li><li>Device(设备)：iPhone、iPad</li><li>Client App：客户端的app</li></ul><p><strong>Tip</strong>：苹果可以省电省流量，原因之一有<strong>Push网络通道是唯一的一个</strong>，并且苹果公司来维护。</p><p><img src="https://upload-images.jianshu.io/upload_images/1683361-36e756ff58c58570.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="push的工作原理"></p><p>总结下大致流程</p><ol><li>设备打开某个App后，会生成唯一的<strong>一个token</strong>，并把这个token上传给我们自己的服务器，我们的服务器有了token，就可以向我们的app推送通知了，这个是前提。但是这个通知并不能直接推送给我们的设备，而是要推送给苹果的服务器。</li><li>我们的服务器会将token和推送的内容，一起推送给苹果的服务器。</li><li>苹果服务器会根据token定位到设备,将push推送给设备。</li><li>设备拿到这个push，就会知道是哪个app。然后就可以将这个通知推送到具体的app。</li></ol><p>参考资料</p><ul><li><a href="https://www.imooc.com/video/15117" target="_blank" rel="noopener">push工作原理</a></li><li><a href="https://developer.apple.com/documentation/usernotifications?language=objc" target="_blank" rel="noopener">苹果官方push内容</a></li><li><a href="http://www.open-open.com/lib/view/open1462951879679.html" target="_blank" rel="noopener">iOS远程推送原理及实现过程</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p style=&quot;color: #333333&quot;&gt;
概述:	iOS的Push的原理。关于设备如何和APNs建立连接。整个推送的步骤等，一网打尽。
&lt;/p&gt;

    
    </summary>
    
      <category term="push相关" scheme="http://www.wunan520.cn/categories/push%E7%9B%B8%E5%85%B3/"/>
    
      <category term="iOS" scheme="http://www.wunan520.cn/categories/push%E7%9B%B8%E5%85%B3/iOS/"/>
    
    
      <category term="push" scheme="http://www.wunan520.cn/tags/push/"/>
    
      <category term="iOS" scheme="http://www.wunan520.cn/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>SecondPage</title>
    <link href="http://www.wunan520.cn/2018/10/06/SecondPage/"/>
    <id>http://www.wunan520.cn/2018/10/06/SecondPage/</id>
    <published>2018-10-05T20:31:12.000Z</published>
    <updated>2018-10-05T21:00:28.489Z</updated>
    
    <content type="html"><![CDATA[<p>SecondPageTest<br>SecondPageTest<br>SecondPageTest<br>SecondPageTest<br>SecondPageTest</p>]]></content>
    
    <summary type="html">
    
      descriptiontest ，SecondPageTest
    
    </summary>
    
      <category term="Test" scheme="http://www.wunan520.cn/categories/Test/"/>
    
    
      <category term="标签2" scheme="http://www.wunan520.cn/tags/%E6%A0%87%E7%AD%BE2/"/>
    
  </entry>
  
  <entry>
    <title>MyFristBlogTest</title>
    <link href="http://www.wunan520.cn/2018/10/05/MyFristBlogTest/"/>
    <id>http://www.wunan520.cn/2018/10/05/MyFristBlogTest/</id>
    <published>2018-10-05T15:08:30.000Z</published>
    <updated>2018-10-05T20:59:02.550Z</updated>
    
    <content type="html"><![CDATA[<h1 id="你好"><a href="#你好" class="headerlink" title="你好"></a>你好</h1><p>这是我的第一篇文章:)<br>22lfldkfldkfdkfk</p><p> <a href="https://www.baidu.com" target="_blank" rel="noopener">连接测试 2222</a> </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eeeee</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      descriptiontest
    
    </summary>
    
      <category term="Hexo教程" scheme="http://www.wunan520.cn/categories/Hexo%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="标签2" scheme="http://www.wunan520.cn/tags/%E6%A0%87%E7%AD%BE2/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://www.wunan520.cn/2018/09/30/hello-world/"/>
    <id>http://www.wunan520.cn/2018/09/30/hello-world/</id>
    <published>2018-09-29T23:33:19.000Z</published>
    <updated>2018-09-29T23:33:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
